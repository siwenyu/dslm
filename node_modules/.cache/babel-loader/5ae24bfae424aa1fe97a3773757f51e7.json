{"ast":null,"code":"import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment,useEffect}from'react';import _ from'lodash';import{useHistory,useLocation}from\"react-router-dom\";import Layout from'../../components/Layout';import'./index.less';import HomeMore from'../../components/HomeMore';import UnitNews from'../../components/UnitNews';import NormalList from'../../components/NormalList';import UnitShengyuansulanItem from'../../components/UnitShengyuansulanItem';import NormalTabList from'../../components/NormalTabList';import{getIndexNews}from'../../../api/index';import{getSecInfos}from'../../../api/second';import{unitZhaopinTabData}from'../../config';import{unitShengyuansulan,unitYuanxijieshao}from'../../page/constans';export default function Unit(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newsList=_useState2[0],setNewsList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),gonggaoList=_useState4[0],setGonggaoList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),studentSource=_useState6[0],setStudentSource=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),xueyuanList=_useState8[0],setXueyuanList=_useState8[1];useEffect(function(){getIndexNews({size:6,category:'C010102'}).then(function(res){var _res$data;console.log('newsParams');console.log(res);setGonggaoList(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.infos)||[]);});getIndexNews({size:4,category:'C010102'}).then(function(res){var _res$data2;console.log('newsParams');console.log(res);setNewsList(((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.infos)||[]);});getSecInfos({page:1,pageSize:6,category:'C030101'}).then(function(res){console.log('生源速览');console.log(res);// alert(JSON.stringify(res.data))\nif(res.data&&res.data.infos){setStudentSource(res.data.infos);}});// 院系介绍\ngetSecInfos({page:1,pageSize:30,category:'C030201'}).then(function(res){console.log('院系介绍');console.log(res);// alert(JSON.stringify(res.data))\nif(res.data&&res.data.infos){var _list=res.data.infos.splice(0,26);setXueyuanList(_list);}});},[history]);return/*#__PURE__*/React.createElement(\"div\",{className:\"page unit\"},/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"normal-row gap-top-m \"},/*#__PURE__*/React.createElement(\"div\",{className:\"unit-gonggao normal-col \"},/*#__PURE__*/React.createElement(\"div\",{className:\"unit-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"home-title\"},\"\\u901A\\u77E5\\u516C\\u544A\"),/*#__PURE__*/React.createElement(HomeMore,{link:'/gonggao?secLNav=13&category=C010102'})),/*#__PURE__*/React.createElement(NormalList,{pathName:\"detailgonggao\",showNum:6,list:gonggaoList,beforeType:1,hasBefore:true,hasTime:true})),/*#__PURE__*/React.createElement(UnitNews,{list:newsList})),/*#__PURE__*/React.createElement(\"div\",{className:\"normal-row gap-top-m\"},/*#__PURE__*/React.createElement(\"div\",{className:\"normal-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"unit-shengyuansulan normal-col \"},/*#__PURE__*/React.createElement(\"div\",{className:\"unit-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"home-title\"},\"\\u751F\\u6E90\\u901F\\u89C8\"),/*#__PURE__*/React.createElement(\"div\",{className:\"home-title\"},/*#__PURE__*/React.createElement(HomeMore,{link:'/shengyuansulan?headerNav=12&secLNav=13'}))),/*#__PURE__*/React.createElement(\"div\",{className:\"normal-row gap-left-m gap-right-m unit-shengyuansulan-list\"},studentSource.map(function(e){return/*#__PURE__*/React.createElement(UnitShengyuansulanItem,{data:e});}))),/*#__PURE__*/React.createElement(\"div\",{className:\"unit-zhaopinxuzhi gap-top-m gap-bottom-m\"},/*#__PURE__*/React.createElement(NormalTabList,{pathName:\"normaldetail\",showNum:4,tabData:unitZhaopinTabData}))),/*#__PURE__*/React.createElement(\"div\",{className:\"unit-yuanxijieshao\"},/*#__PURE__*/React.createElement(\"div\",{className:\"unit-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"home-title\"},\"\\u9662\\u7CFB\\u4ECB\\u7ECD\"),/*#__PURE__*/React.createElement(\"div\",{className:\"home-title\"},/*#__PURE__*/React.createElement(HomeMore,{link:\"/yuanxijieshao?headerNav=12&secLNav=13\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"unit-yuanxijieshao-list\"},xueyuanList.map(function(e){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){window.open(\"/normaldetail?headerNav=11&secLNav=11&id=\".concat(e.infoId));},className:\"unit-yuanxijieshao-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"normal-item-title c-line-clamp1\"},e.title));}))))));}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/page/Unit/index.js"],"names":["React","useState","Fragment","useEffect","_","useHistory","useLocation","Layout","HomeMore","UnitNews","NormalList","UnitShengyuansulanItem","NormalTabList","getIndexNews","getSecInfos","unitZhaopinTabData","unitShengyuansulan","unitYuanxijieshao","Unit","history","newsList","setNewsList","gonggaoList","setGonggaoList","studentSource","setStudentSource","xueyuanList","setXueyuanList","size","category","then","res","console","log","data","infos","page","pageSize","_list","splice","map","e","window","open","infoId","title"],"mappings":"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","sourcesContent":["import React, { useState, Fragment, useEffect } from 'react';\nimport _ from 'lodash';\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nimport Layout from '../../components/Layout';\n\nimport './index.less';\nimport HomeMore from '../../components/HomeMore';\nimport UnitNews from '../../components/UnitNews';\nimport NormalList from '../../components/NormalList';\nimport UnitShengyuansulanItem from '../../components/UnitShengyuansulanItem';\nimport NormalTabList from '../../components/NormalTabList';\n\nimport {\n  getIndexNews,\n} from '../../../api/index';\n\nimport {\n  getSecInfos,\n} from '../../../api/second';\n\nimport {\n  unitZhaopinTabData,\n} from '../../config';\n\nimport { unitShengyuansulan, unitYuanxijieshao } from '../../page/constans';\n\nexport default function Unit() {\n  const history = useHistory();\n\n  const [newsList, setNewsList] = useState([]);\n  const [gonggaoList, setGonggaoList] = useState([]);\n  const [studentSource, setStudentSource] = useState([]);\n  const [xueyuanList, setXueyuanList] = useState([]);\n\n  useEffect(() => {\n    getIndexNews({ size: 6, category: 'C010102' }).then((res) => {\n      console.log('newsParams');\n      console.log(res);\n      setGonggaoList(res.data?.infos || []);\n    });\n\n    getIndexNews({ size: 4, category: 'C010102' }).then((res) => {\n      console.log('newsParams');\n      console.log(res);\n      setNewsList(res.data?.infos || []);\n    });\n\n    getSecInfos({ page: 1, pageSize: 6, category: 'C030101' }).then((res) => {\n      console.log('生源速览');\n      console.log(res);\n      // alert(JSON.stringify(res.data))\n      if (res.data && res.data.infos) {\n        setStudentSource(res.data.infos);\n      }\n    });\n\n    // 院系介绍\n    getSecInfos({ page: 1, pageSize: 30, category: 'C030201' }).then((res) => {\n      console.log('院系介绍');\n      console.log(res);\n      // alert(JSON.stringify(res.data))\n      if (res.data && res.data.infos) {\n        const _list = res.data.infos.splice(0, 26);\n        setXueyuanList(_list);\n      }\n    });\n\n  }, [history]);\n\n  return (\n    <div className=\"page unit\">\n      <Layout>\n        <div className=\"normal-row gap-top-m \">\n          <div className=\"unit-gonggao normal-col \">\n            <div className=\"unit-title\">\n              <div className=\"home-title\">通知公告</div>\n              <HomeMore link={'/gonggao?secLNav=13&category=C010102'}/>\n            </div>\n            <NormalList pathName=\"detailgonggao\" showNum={6} list={gonggaoList} beforeType={1} hasBefore={true} hasTime={true} />\n          </div>\n          \n          <UnitNews list={newsList} />\n        </div>\n\n        {/* 生源速览 */}\n        <div className=\"normal-row gap-top-m\">\n          <div className=\"normal-col\">\n            <div className=\"unit-shengyuansulan normal-col \">\n              <div className=\"unit-title\">\n                <div className=\"home-title\">生源速览</div>\n                <div className=\"home-title\">\n                  <HomeMore link={'/shengyuansulan?headerNav=12&secLNav=13'}/>\n                </div>\n              </div>\n              <div className=\"normal-row gap-left-m gap-right-m unit-shengyuansulan-list\">\n                {\n                  studentSource.map(e => {\n                    return (\n                      <UnitShengyuansulanItem data={e} />\n                    )\n                  })\n                }\n              </div>\n              \n            </div>\n            <div className=\"unit-zhaopinxuzhi gap-top-m gap-bottom-m\">\n              <NormalTabList pathName=\"normaldetail\" showNum={4} tabData={unitZhaopinTabData} />\n            </div>\n          </div>\n          <div className=\"unit-yuanxijieshao\">\n            <div className=\"unit-title\">\n              <div className=\"home-title\">院系介绍</div>\n              <div className=\"home-title\">\n                <HomeMore link=\"/yuanxijieshao?headerNav=12&secLNav=13\" />\n              </div>\n            </div>\n            <div className=\"unit-yuanxijieshao-list\">\n              {\n                xueyuanList.map(e => {\n                  return (\n                    <div onClick={() => {window.open(`/normaldetail?headerNav=11&secLNav=11&id=${e.infoId}`)}} className=\"unit-yuanxijieshao-item\">\n                      <div className=\"normal-item-title c-line-clamp1\">{e.title}</div>\n                    </div>\n                  )\n                })\n              }\n            </div>\n          </div>\n        </div>\n\n      </Layout>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}