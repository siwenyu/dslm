{"ast":null,"code":"import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment,useEffect}from'react';import{RightOutlined}from'@ant-design/icons';import{Table}from'antd';import{useHistory}from'react-router-dom';import Layout from'../../components/Layout';import ErjiDetailKeys from'../../components/ErjiDetailKeys';import SubmitResume from'../../components/SubmitResume';import{getCompanyWithFair}from'../../../api/second';import'./index.less';import RightTopNav from'../../components/RightTopNav';import{getParam}from'../../../utils/url';var columns=[{title:'职位名称',dataIndex:'name',key:'name'},{title:'需求人数',dataIndex:'number',key:'number',width:100},{title:'需求专业',dataIndex:'major',key:'major',width:300},{title:'投简历',dataIndex:'jobId',key:'jobId',width:140,render:function render(){return/*#__PURE__*/React.createElement(SubmitResume,null);}}];export default function CompanyHomeWithFairs(){var _detail$company,_detail$logo,_detail$fairJobs;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listData=_useState4[0],setListData=_useState4[1];var history=useHistory();useEffect(function(){getData();},[history]);var getData=function getData(){getCompanyWithFair({companyId:getParam('companyId'),fairId:getParam('fairId')}).then(function(res){if(res.data&&res.data.fairCompany){var _data$company,_data$company2,_data$company3,_data$company$nature,_data$company4;var _data=res.data.fairCompany;var _industry=((_data$company=_data.company)===null||_data$company===void 0?void 0:_data$company.industry)||null;var _listData=[{key:'官网地址',value:((_data$company2=_data.company)===null||_data$company2===void 0?void 0:_data$company2.website)||'暂无',link:((_data$company3=_data.company)===null||_data$company3===void 0?void 0:_data$company3.website)||'',linkText:''},{key:'领域',value:_industry?_industry.industryTiny||_industry.industrySmall||_industry.industryMiddle||_industry.industryBig:'暂无'},{key:'规模',value:_data.company.staffs||'暂无'},{key:'单位性质',value:((_data$company$nature=_data.company.nature)===null||_data$company$nature===void 0?void 0:_data$company$nature.name)||'暂无'},{key:'地址',value:\"\".concat((_data$company4=_data.company)===null||_data$company4===void 0?void 0:_data$company4.address)}];setListData(_listData);_data.fairJobs.forEach(function(e){e.name=e.job.name;e.number=e.job.headCount||0;// 专业\nif(e.job.allMajors){e.major='专业不限';}else{var majorArr=[];e.job.majors.forEach(function(item){return majorArr.push(item.major||item.middleKind);});e.major=\"\".concat(majorArr.join('、'));}});setDetail(_data);}});};var btnClick=function btnClick(){window.open('');};return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"erji company-fairs-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"right\"},/*#__PURE__*/React.createElement(RightTopNav,null),/*#__PURE__*/React.createElement(\"div\",{className:\"normal-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"erji-title\"},/*#__PURE__*/React.createElement(\"span\",null,(_detail$company=detail.company)===null||_detail$company===void 0?void 0:_detail$company.name),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){window.open(\"/xuexiaozhuye?headerNav=11&secLNav=11&companyId=\".concat(detail.company.companyId));},className:\"more\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u67E5\\u770B\\u8BE6\\u7EC6\"),/*#__PURE__*/React.createElement(RightOutlined,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"company-info gap-top-m\"},/*#__PURE__*/React.createElement(\"div\",{className:\"company-logo gap-right-m\"},/*#__PURE__*/React.createElement(\"img\",{src:((_detail$logo=detail.logo)===null||_detail$logo===void 0?void 0:_detail$logo.url)||window.defaultLogo,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},/*#__PURE__*/React.createElement(ErjiDetailKeys,{list:listData}))),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title\"},\"\\u62DB\\u8058\\u804C\\u4F4D\",/*#__PURE__*/React.createElement(\"span\",null,((_detail$fairJobs=detail.fairJobs)===null||_detail$fairJobs===void 0?void 0:_detail$fairJobs.length)||0)),/*#__PURE__*/React.createElement(Table,{pagination:false,dataSource:detail.fairJobs,columns:columns})))));}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/page/CompanyHomeWithFairs/index.js"],"names":["React","useState","Fragment","useEffect","RightOutlined","Table","useHistory","Layout","ErjiDetailKeys","SubmitResume","getCompanyWithFair","RightTopNav","getParam","columns","title","dataIndex","key","width","render","CompanyHomeWithFairs","detail","setDetail","listData","setListData","history","getData","companyId","fairId","then","res","data","fairCompany","_data","_industry","company","industry","_listData","value","website","link","linkText","industryTiny","industrySmall","industryMiddle","industryBig","staffs","nature","name","address","fairJobs","forEach","e","job","number","headCount","allMajors","major","majorArr","majors","item","push","middleKind","join","btnClick","window","open","logo","url","defaultLogo","length"],"mappings":"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","sourcesContent":["import React, { useState, Fragment, useEffect } from 'react';\nimport { RightOutlined } from '@ant-design/icons';\nimport { Table } from 'antd';\nimport { useHistory } from 'react-router-dom';\n\nimport Layout from '../../components/Layout';\nimport ErjiDetailKeys from '../../components/ErjiDetailKeys';\nimport SubmitResume from '../../components/SubmitResume';\n\nimport { getCompanyWithFair } from '../../../api/second';\n\nimport './index.less';\nimport RightTopNav from '../../components/RightTopNav';\n\nimport { getParam } from '../../../utils/url';\n\nconst columns = [\n  {\n    title: '职位名称',\n    dataIndex: 'name',\n    key: 'name',\n  },\n  {\n    title: '需求人数',\n    dataIndex: 'number',\n    key: 'number',\n    width: 100,\n  },\n  {\n    title: '需求专业',\n    dataIndex: 'major',\n    key: 'major',\n    width: 300,\n  },\n  {\n    title: '投简历',\n    dataIndex: 'jobId',\n    key: 'jobId',\n    width: 140,\n    render: () => <SubmitResume />\n  },\n];\n\nexport default function CompanyHomeWithFairs() {\n  const [detail, setDetail] = useState({});\n  const [listData, setListData] = useState([]);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    getData();\n  }, [history]);\n\n  const getData = () => {\n    getCompanyWithFair({ companyId: getParam('companyId'), fairId: getParam('fairId') }).then((res) => {\n      if (res.data && res.data.fairCompany) {\n        const _data = res.data.fairCompany;\n        const  _industry = _data.company?.industry || null;\n        const _listData = [\n          {\n            key: '官网地址',\n            value: _data.company?.website || '暂无',\n            link: _data.company?.website || '',\n            linkText: '',\n          },\n          {\n            key: '领域',\n            value: _industry ? (_industry.industryTiny || _industry.industrySmall || _industry.industryMiddle || _industry.industryBig) : '暂无',\n          },\n          {\n            key: '规模',\n            value: _data.company.staffs || '暂无',\n          },\n          {\n            key: '单位性质',\n            value: _data.company.nature?.name || '暂无',\n          },\n          {\n            key: '地址',\n            value: `${_data.company?.address}`,\n          }\n        ];\n        setListData(_listData);\n\n        _data.fairJobs.forEach(e => {\n          e.name = e.job.name;\n          e.number = e.job.headCount || 0;\n          \n          // 专业\n          if (e.job.allMajors) {\n            e.major = '专业不限';\n          } else {\n            let majorArr = [];\n            e.job.majors.forEach(item => majorArr.push(item.major || item.middleKind));\n            e.major = `${majorArr.join('、')}`;\n          }\n        })\n        setDetail(_data);\n      }\n    });\n  }\n\n  const btnClick = () => {\n    window.open('');\n  }\n\n  return (\n    <Layout>\n      <div className=\"erji company-fairs-detail\">\n        <div className=\"right\">\n          <RightTopNav />\n          <div className=\"normal-detail\">\n            <div className=\"erji-title\">\n              <span>{detail.company?.name}</span>\n              <div onClick={() => { window.open(`/xuexiaozhuye?headerNav=11&secLNav=11&companyId=${detail.company.companyId}`) }} className=\"more\">\n                <span>查看详细</span>\n                <RightOutlined />\n              </div>\n            </div>\n            <div className=\"company-info gap-top-m\">\n              <div className=\"company-logo gap-right-m\">\n                <img src={detail.logo?.url || window.defaultLogo} alt=\"\" />\n              </div>\n              <div className=\"list\">\n                <ErjiDetailKeys list={listData} />\n              </div>\n            </div>\n            \n            {/* 招聘职位 */}\n            <div className=\"gap-top-l erji-normal-title\">\n              招聘职位\n              <span>{detail.fairJobs?.length || 0}</span>\n            </div>\n\n            <Table pagination={false} dataSource={detail.fairJobs} columns={columns} />\n\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}"]},"metadata":{},"sourceType":"module"}