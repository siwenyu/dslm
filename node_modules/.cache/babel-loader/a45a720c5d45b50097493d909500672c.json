{"ast":null,"code":"import _objectSpread from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment,useEffect}from'react';import{Menu,Empty,TreeSelect}from'antd';import{SearchOutlined}from'@ant-design/icons';import{useHistory}from'react-router-dom';import ZhaopinItem from'../ItemNotic';import ItemPreach from'../ItemPreach';import ZhiweiItem from'../ItemJob';import ItemJobWithFair from'../ItemJobWithFair';import{getParam}from'../../../utils/url';import'./index.less';import{Form,Input,Select,Pagination}from'antd';import{searchParamsPreaches,searchParamsNotices,searchParamsJobs,searchParamsJobsFromFair}from'./constans';import{getSecCOM_NATURE,getSecRegions,getSecIndustries,postSecPreaches,postSecNotices,postSecJobs,postSecJobsFromfair}from'../../../api/second';import searchIcon from'../../assets/images/search-icon.png';var Option=Select.Option;export default function ErjiList(_ref){var type=_ref.type,onSearchChange=_ref.onSearchChange,isShowList=_ref.isShowList;var history=useHistory();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),natureList=_useState2[0],setNatureList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),regions=_useState4[0],setRegions=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),industriesList=_useState6[0],setIndustriesList=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchName=_useState8[0],setSearchName=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),total=_useState12[0],setTotal=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),list=_useState14[0],setList=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),valueMap=_useState16[0],setValueMap=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),hangyeValueMap=_useState18[0],setHangyeValueMap=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),regionsSelect=_useState20[0],setRegionsSelect=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),hangyeSelect=_useState22[0],setHangyeSelect=_useState22[1];// 获取所有筛选条件\nuseEffect(function(){getCOM_NATURE();getRegions();getIndustries();},[history]);var regionsRes={};var hangyeRes={};var getPath=function getPath(value){var path=[];var current=valueMap[value];while(current){path.unshift(current.value);current=current.parent;}return path;};var loops=function loops(list,parent){return(list||[]).map(function(_ref2){var children=_ref2.children,value=_ref2.value;var node=regionsRes[value]={parent:parent,value:value};node.children=loops(children,node);return node;});};var getPathHangye=function getPathHangye(value){var path=[];var current=hangyeValueMap[value];while(current){path.unshift(current.value);current=current.parent;}return path;};var loopsHangye=function loopsHangye(list,parent){return(list||[]).map(function(_ref3){var children=_ref3.children,value=_ref3.value;var node=hangyeRes[value]={parent:parent,value:value};node.children=loopsHangye(children,node);return node;});};// 初始化列表\nuseEffect(function(){setTimeout(function(){onFormChange({});},200);},[history]);// 搜索入参\nvar searchParams={};if(type==='preaches'){searchParamsPreaches.preachDate=getParam('date');if(getParam('companyName')){searchParamsPreaches.company.name=getParam('companyName');}searchParams=searchParamsPreaches;}if(type==='notices'){searchParams=searchParamsNotices;}if(type==='jobs'){if(getParam('companyName')){searchParamsJobs.company.name=getParam('companyName');}searchParams=searchParamsJobs;}if(type==='jobsFair'){searchParamsJobsFromFair.fairId=getParam('id');searchParams=searchParamsJobsFromFair;}// 获取性质\nvar getCOM_NATURE=function getCOM_NATURE(){if(type==='jobs'){setNatureList([{code:'全职',name:'全职'},{code:'兼职',name:'兼职'},{code:'实习',name:'实习'}]);}else{getSecCOM_NATURE().then(function(res){res.data&&setNatureList(res.data.param);});}};// 获取地区列表\nvar getRegions=function getRegions(){getSecRegions().then(function(res){res.map(function(item){item.value=item.code;item.label=item.name;item.title=item.name;item.key=item.code;if(item.children&&item.children.length>0){item.children.map(function(itemItem){itemItem.value=itemItem.code;itemItem.label=itemItem.name;itemItem.title=itemItem.name;itemItem.key=itemItem.code;if(itemItem.children&&itemItem.children.length>0){itemItem.children.map(function(itemItemItem){itemItemItem.value=itemItemItem.code;itemItemItem.label=itemItemItem.display;itemItemItem.title=itemItemItem.display;itemItemItem.key=itemItemItem.code;});}});}});setRegions(res);loops(res);setValueMap(regionsRes);});};// 获取行业\nvar getIndustries=function getIndustries(){getSecIndustries().then(function(res){res.map(function(item){item.value=item.code;item.label=item.name;if(item.children&&item.children.length>0){item.children.map(function(itemItem){itemItem.value=itemItem.code;itemItem.label=itemItem.name;if(itemItem.children&&itemItem.children.length>0){itemItem.children.map(function(itemItemItem){itemItemItem.value=itemItemItem.code;itemItemItem.label=itemItemItem.name;if(itemItemItem.children&&itemItemItem.children.length>0){itemItemItem.children.map(function(itemItemItemItem){itemItemItemItem.value=itemItemItemItem.code;itemItemItemItem.label=itemItemItemItem.name;});}});}});}});setIndustriesList(res);loopsHangye(res);setHangyeValueMap(hangyeRes);});};// 搜索\nvar onSearch=function onSearch(){onFormChange({searchName:searchName});};var onFormChange=function onFormChange(_ref4){var searchName=_ref4.searchName,page=_ref4.page,regionsSelectNow=_ref4.regionsSelectNow,hangyeSelectNow=_ref4.hangyeSelectNow;// 名字搜索不为空\nif(searchName||searchParams.company.name){searchParams.company.name=searchName||searchParams.company.name;}else{searchParams.company.name='';}var _params=form.getFieldValue();// 如果是职位搜索，则是全职、兼职、实习\nif(type==='jobs'){searchParams.nature=_params.nature;}else{searchParams.company.nature.code=_params.nature;}// 地区\nvar _diqu=regionsSelectNow||regionsSelect;if(regionsSelectNow&&regionsSelectNow.length===0){searchParams.company.region={provinceCode:'',cityCode:'',countryCode:''};}else{_diqu.map(function(item,index){if(index===0){searchParams.company.region.provinceCode=item;}if(index===1){searchParams.company.region.cityCode=item;}if(index===2){searchParams.company.region.countryCode=item;}});}var _hangye=hangyeSelectNow||hangyeSelect;if(hangyeSelectNow&&hangyeSelectNow.length===0){searchParams.company.industry={industryBigCode:'',industryMiddleCode:'',industrySmallCode:'',industryTinyCode:''};}else{_hangye.map(function(item,index){if(index===0){searchParams.company.industry.industryBigCode=item;}if(index===1){searchParams.company.industry.industryMiddleCode=item;}if(index===2){searchParams.company.industry.industrySmallCode=item;}if(index===3){searchParams.company.industry.industryTinyCode=item;}});}// 识别类型\ngetApi()(_objectSpread(_objectSpread({},searchParams),{},{page:page||1,pageSize:type==='jobsFair'?20:10})).then(function(resData){var res=resData.data||{};setTotal(res.total);var _list=[];if(type==='preaches'){_list=res.preaches;}if(type==='notices'){_list=res.notices;}if(type==='jobs'){_list=res.jobs;}if(type==='jobsFair'){_list=res.fairCompanies;}onSearchChange&&onSearchChange(_list);setList(_list);});};var getApi=function getApi(){switch(type){case'preaches':return postSecPreaches;case'notices':return postSecNotices;case'jobs':return postSecJobs;case'jobsFair':return postSecJobsFromfair;}};// 地区选择\nvar onRegionsChange=function onRegionsChange(data,index){setRegionsSelect(getPath(data));setTimeout(function(){onFormChange({regionsSelectNow:getPath(data)});},200);};// 行业\nvar onIndustriesChange=function onIndustriesChange(data){setHangyeSelect(getPathHangye(data));setTimeout(function(){onFormChange({hangyeSelectNow:getPathHangye(data)});},200);};// name\nvar searchNamechange=function searchNamechange(e,index){setSearchName(e.currentTarget.value);};// 翻页\nvar onChange=function onChange(index){setPage(index);onFormChange({page:index});};return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"erji-form\"},/*#__PURE__*/React.createElement(Form,{form:form,onValuesChange:function onValuesChange(){return onFormChange({});}},/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},/*#__PURE__*/React.createElement(Form.Item,{name:\"name\"},/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"img\",{className:\"search-icon\",src:searchIcon,alt:\"\"}),/*#__PURE__*/React.createElement(Input,{onPressEnter:onSearch,onChange:searchNamechange,value:searchName,placeholder:\"\\u641C\\u7D22\\u5355\\u4F4D\\u540D\\u79F0\",prefix:/*#__PURE__*/React.createElement(\"div\",{className:\"search-icon\"})}),/*#__PURE__*/React.createElement(\"span\",{onClick:onSearch,className:\"name-btn\"},\"\\u641C\\u7D22\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-item xingzhi\"},/*#__PURE__*/React.createElement(Form.Item,{name:\"nature\"},/*#__PURE__*/React.createElement(Select,{allowClear:true,listHeight:240,placeholder:\"\\u6027\\u8D28\"},natureList.map(function(e){return/*#__PURE__*/React.createElement(Option,{value:e.code,key:e.code},e.name);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-item\"},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(TreeSelect,{allowClear:true,style:{width:'100%'}// value={form.getFieldValue().region}\n,dropdownStyle:{maxHeight:400,overflow:'auto'},treeData:regions,placeholder:\"\\u5730\\u533A\"// treeDefaultExpandAll\n,onChange:onRegionsChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-item\"},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(TreeSelect,{allowClear:true,style:{width:'100%'}// value={form.getFieldValue().region}\n,dropdownStyle:{maxHeight:400,overflow:'auto'},treeData:industriesList,placeholder:\"\\u884C\\u4E1A\"// treeDefaultExpandAll\n,onChange:onIndustriesChange}))))),isShowList&&/*#__PURE__*/React.createElement(\"div\",{className:\"erjilist-list \".concat(type,\"-list\")},list&&list.length>0?list.slice(0,type==='jobsFair'?20:10).map(function(item,indexIndex){switch(type){case'preaches':return/*#__PURE__*/React.createElement(ItemPreach,{key:item.title,riliType:item.riliType,data:item});case'notices':return/*#__PURE__*/React.createElement(ZhaopinItem,{key:item.title,riliType:item.riliType,data:item});case'jobs':return/*#__PURE__*/React.createElement(ZhiweiItem,{key:item.title,riliType:item.riliType,data:item});case'jobsFair':return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(ItemJobWithFair,{key:item.title,riliType:item.riliType,data:item}));}return/*#__PURE__*/React.createElement(ZhaopinItem,{key:item.title,riliType:item.riliType,data:item});}):/*#__PURE__*/React.createElement(Empty,null)),list&&list.length>0&&isShowList&&/*#__PURE__*/React.createElement(Pagination,{pageSize:\"\".concat(type==='jobsFair'?20:10),defaultCurrent:1,onChange:onChange,total:total,showSizeChanger:false}));}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/components/ErjiList/index.js"],"names":["React","useState","Fragment","useEffect","Menu","Empty","TreeSelect","SearchOutlined","useHistory","ZhaopinItem","ItemPreach","ZhiweiItem","ItemJobWithFair","getParam","Form","Input","Select","Pagination","searchParamsPreaches","searchParamsNotices","searchParamsJobs","searchParamsJobsFromFair","getSecCOM_NATURE","getSecRegions","getSecIndustries","postSecPreaches","postSecNotices","postSecJobs","postSecJobsFromfair","searchIcon","Option","ErjiList","type","onSearchChange","isShowList","history","useForm","form","natureList","setNatureList","regions","setRegions","industriesList","setIndustriesList","searchName","setSearchName","page","setPage","total","setTotal","list","setList","valueMap","setValueMap","hangyeValueMap","setHangyeValueMap","regionsSelect","setRegionsSelect","hangyeSelect","setHangyeSelect","getCOM_NATURE","getRegions","getIndustries","regionsRes","hangyeRes","getPath","value","path","current","unshift","parent","loops","map","children","node","getPathHangye","loopsHangye","setTimeout","onFormChange","searchParams","preachDate","company","name","fairId","code","then","res","data","param","item","label","title","key","length","itemItem","itemItemItem","display","itemItemItemItem","onSearch","regionsSelectNow","hangyeSelectNow","_params","getFieldValue","nature","_diqu","region","provinceCode","cityCode","countryCode","index","_hangye","industry","industryBigCode","industryMiddleCode","industrySmallCode","industryTinyCode","getApi","pageSize","resData","_list","preaches","notices","jobs","fairCompanies","onRegionsChange","onIndustriesChange","searchNamechange","e","currentTarget","onChange","width","maxHeight","overflow","slice","indexIndex","riliType"],"mappings":"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","sourcesContent":["import React, { useState, Fragment, useEffect } from 'react';\nimport { Menu, Empty, TreeSelect } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { useHistory } from 'react-router-dom';\n\nimport ZhaopinItem from '../ItemNotic';\nimport ItemPreach from '../ItemPreach';\nimport ZhiweiItem from '../ItemJob';\nimport ItemJobWithFair from '../ItemJobWithFair';\n\nimport { getParam } from '../../../utils/url';\n\nimport './index.less';\n\nimport { Form, Input, Select, Pagination } from 'antd';\nimport {\n  searchParamsPreaches,\n  searchParamsNotices,\n  searchParamsJobs,\n  searchParamsJobsFromFair,\n} from './constans';\n\nimport {\n  getSecCOM_NATURE,\n  getSecRegions,\n  getSecIndustries,\n  postSecPreaches,\n  postSecNotices,\n  postSecJobs,\n  postSecJobsFromfair,\n} from '../../../api/second';\n\nimport searchIcon from '../../assets/images/search-icon.png';\n\nconst { Option } = Select;\n\n\nexport default function ErjiList({\n  type, onSearchChange, isShowList\n}) {\n  const history = useHistory();\n\n  const [form] = Form.useForm();\n  const [natureList, setNatureList] = useState([]);\n  const [regions, setRegions] = useState([]);\n  const [industriesList, setIndustriesList] = useState([]);\n  const [searchName, setSearchName] = useState('');\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(1);\n  const [list, setList] = useState([]);\n  const [valueMap, setValueMap] = useState([]);\n  const [hangyeValueMap, setHangyeValueMap] = useState([]);\n  const [regionsSelect, setRegionsSelect] = useState([]);\n  const [hangyeSelect, setHangyeSelect] = useState([]);\n\n  // 获取所有筛选条件\n  useEffect(() => {\n    getCOM_NATURE();\n    getRegions();\n    getIndustries();\n  }, [history]);\n\n  const regionsRes = {};\n  const hangyeRes = {};\n\n  const getPath = (value) => {\n    const path = [];\n    let current = valueMap[value];\n    while (current) {\n      path.unshift(current.value);\n      current = current.parent;\n    }\n    return path;\n  }\n\n  const loops = (list, parent) => {\n    return (list || []).map(({ children, value }) => {\n      const node = (regionsRes[value] = {\n        parent,\n        value\n      });\n      node.children = loops(children, node);\n      return node;\n    });\n  }\n\n  const getPathHangye = (value) => {\n    const path = [];\n    let current = hangyeValueMap[value];\n    while (current) {\n      path.unshift(current.value);\n      current = current.parent;\n    }\n    return path;\n  }\n\n  const loopsHangye = (list, parent) => {\n    return (list || []).map(({ children, value }) => {\n      const node = (hangyeRes[value] = {\n        parent,\n        value\n      });\n      node.children = loopsHangye(children, node);\n      return node;\n    });\n  }\n\n  // 初始化列表\n  useEffect(() => {\n    setTimeout(() => {\n      onFormChange({});\n    }, 200);\n  }, [history]);\n\n  // 搜索入参\n  let searchParams = {};\n  if (type === 'preaches') {\n    searchParamsPreaches.preachDate = getParam('date');\n    if (getParam('companyName')) {\n      searchParamsPreaches.company.name = getParam('companyName');\n    }\n    searchParams = searchParamsPreaches;\n  }\n  if (type === 'notices') {\n    searchParams = searchParamsNotices;\n  }\n  if (type === 'jobs') {\n    if (getParam('companyName')) {\n      searchParamsJobs.company.name = getParam('companyName');\n    }\n    searchParams = searchParamsJobs;\n  }\n  if (type === 'jobsFair') {\n    searchParamsJobsFromFair.fairId = getParam('id');\n    searchParams = searchParamsJobsFromFair;\n  }\n\n  // 获取性质\n  const getCOM_NATURE = () => {\n    if (type === 'jobs') {\n      setNatureList([\n        {\n          code: '全职',\n          name: '全职',\n        },\n        {\n          code: '兼职',\n          name: '兼职',\n        },\n        {\n          code: '实习',\n          name: '实习',\n        },\n      ])\n    } else {\n      getSecCOM_NATURE().then(res => {\n        res.data && setNatureList(res.data.param);\n      })\n    }\n    \n  }\n\n  // 获取地区列表\n  const getRegions = () => {\n    getSecRegions().then(res => {\n      res.map(item => {\n        item.value = item.code;\n        item.label = item.name;\n        item.title = item.name;\n        item.key = item.code;\n\n        if (item.children && item.children.length > 0) {\n          item.children.map(itemItem => {\n            itemItem.value = itemItem.code;\n            itemItem.label = itemItem.name;\n            itemItem.title = itemItem.name;\n            itemItem.key = itemItem.code;\n\n            if (itemItem.children && itemItem.children.length > 0) {\n              itemItem.children.map(itemItemItem => {\n                itemItemItem.value = itemItemItem.code;\n                itemItemItem.label = itemItemItem.display;\n                itemItemItem.title = itemItemItem.display;\n                itemItemItem.key = itemItemItem.code;\n              })\n            }\n          })\n        }\n      })\n      setRegions(res);\n      loops(res);\n      setValueMap(regionsRes);\n    })\n  }\n\n  // 获取行业\n  const getIndustries = () => {\n    getSecIndustries().then(res => {\n      res.map(item => {\n        item.value = item.code;\n        item.label = item.name;\n\n        if (item.children && item.children.length > 0) {\n          item.children.map(itemItem => {\n            itemItem.value = itemItem.code;\n            itemItem.label = itemItem.name;\n\n            if (itemItem.children && itemItem.children.length > 0) {\n              itemItem.children.map(itemItemItem => {\n                itemItemItem.value = itemItemItem.code;\n                itemItemItem.label = itemItemItem.name;\n\n                if (itemItemItem.children && itemItemItem.children.length > 0) {\n                  itemItemItem.children.map(itemItemItemItem => {\n                    itemItemItemItem.value = itemItemItemItem.code;\n                    itemItemItemItem.label = itemItemItemItem.name;\n                  })\n                }\n              })\n            }\n          })\n        }\n      })\n\n      setIndustriesList(res);\n      loopsHangye(res);\n      setHangyeValueMap(hangyeRes);\n    })\n  };\n\n  // 搜索\n  const onSearch = () => {\n    onFormChange({ searchName });\n  }\n  \n  const onFormChange = ({ searchName, page, regionsSelectNow, hangyeSelectNow }) => {\n    // 名字搜索不为空\n    if (searchName || searchParams.company.name) {\n      searchParams.company.name = searchName || searchParams.company.name;\n    } else {\n      searchParams.company.name = '';\n    }\n    const _params = form.getFieldValue();\n    // 如果是职位搜索，则是全职、兼职、实习\n    if (type === 'jobs') {\n      searchParams.nature = _params.nature;\n    } else {\n      searchParams.company.nature.code = _params.nature;\n    }\n    // 地区\n    const _diqu = regionsSelectNow || regionsSelect;\n    if (regionsSelectNow && regionsSelectNow.length === 0) {\n      searchParams.company.region = {\n        provinceCode: '',\n        cityCode: '',\n        countryCode: '',\n      }\n    } else {\n      _diqu.map((item, index) => {\n        if (index === 0) {\n          searchParams.company.region.provinceCode = item;\n        }\n        if (index === 1) {\n          searchParams.company.region.cityCode = item;\n        }\n        if (index === 2) {\n          searchParams.company.region.countryCode = item;\n        }\n      });\n    }\n\n    const _hangye = hangyeSelectNow || hangyeSelect;\n\n    if (hangyeSelectNow && hangyeSelectNow.length === 0) {\n      searchParams.company.industry = {\n        industryBigCode: '',\n        industryMiddleCode: '',\n        industrySmallCode: '',\n        industryTinyCode: '',\n      }\n    } else {\n      _hangye.map((item, index) => {\n        if (index === 0) {\n          searchParams.company.industry.industryBigCode = item;\n        }\n        if (index === 1) {\n          searchParams.company.industry.industryMiddleCode = item;\n        }\n        if (index === 2) {\n          searchParams.company.industry.industrySmallCode = item;\n        }\n  \n        if (index === 3) {\n          searchParams.company.industry.industryTinyCode = item;\n        }\n      });\n    }\n    \n\n    // 识别类型\n    getApi()({ ...searchParams, page: page || 1, pageSize: type === 'jobsFair' ? 20 : 10 }).then(resData => {\n      const res = resData.data || {};\n      setTotal(res.total);\n\n      let _list = [];\n      if (type === 'preaches') {\n        _list = res.preaches;\n      }\n      if (type === 'notices') {\n        _list = res.notices;\n      }\n      if (type === 'jobs') {\n        _list = res.jobs;\n      }\n      if (type === 'jobsFair') {\n        _list = res.fairCompanies;\n      }\n\n      onSearchChange && onSearchChange(_list);\n      setList(_list);\n    });\n  }\n\n  const getApi = () => {\n    switch (type) {\n      case 'preaches':\n        return postSecPreaches;\n      case 'notices':\n        return postSecNotices;\n      case 'jobs':\n        return postSecJobs;\n      case 'jobsFair':\n        return postSecJobsFromfair;\n    }\n  };\n\n  // 地区选择\n  const onRegionsChange = (data, index) => {\n    setRegionsSelect(getPath(data));\n    setTimeout(() => {\n      onFormChange({ regionsSelectNow: getPath(data) });\n    }, 200);\n  }\n\n  // 行业\n  const onIndustriesChange = (data) => {\n    setHangyeSelect(getPathHangye(data));\n    setTimeout(() => {\n      onFormChange({ hangyeSelectNow: getPathHangye(data) });\n    }, 200);\n  }\n\n  // name\n  const searchNamechange = (e, index) => {\n    setSearchName(e.currentTarget.value);\n  }\n\n  // 翻页\n  const onChange = (index) => {\n    setPage(index);\n    onFormChange({ page: index });\n  };\n\n  return (\n    <Fragment>\n      <div className=\"erji-form\">\n        <Form\n          form={form}\n          onValuesChange={() => onFormChange({})}\n        >\n          <div className=\"name\">\n            <Form.Item\n                name=\"name\"\n              >\n              <Fragment>\n                <img className=\"search-icon\" src={searchIcon} alt=\"\" />\n                <Input onPressEnter={onSearch} onChange={searchNamechange} value={searchName} placeholder=\"搜索单位名称\" prefix={<div className=\"search-icon\"></div>} />\n                <span onClick={onSearch} className=\"name-btn\">搜索</span>\n              </Fragment>\n            </Form.Item>\n          </div>\n          <div className=\"form-item xingzhi\">\n            <Form.Item\n                name=\"nature\"\n              >\n              <Select allowClear listHeight={240} placeholder=\"性质\">\n                {\n                  natureList.map(e => {\n                    return <Option value={e.code} key={e.code}>{e.name}</Option>\n                  })\n                }\n              </Select>\n            </Form.Item>\n          </div>\n          <div className=\"form-item\">\n            <Form.Item\n                // name=\"region\"\n              >\n              {/* <Cascader options={regions} onChange={onRegionsChange} placeholder=\"地区\" /> */}\n              <TreeSelect\n                allowClear\n                style={{ width: '100%' }}\n                // value={form.getFieldValue().region}\n                dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                treeData={regions}\n                placeholder=\"地区\"\n                // treeDefaultExpandAll\n                onChange={onRegionsChange}\n              />\n            </Form.Item>\n          </div>\n          <div className=\"form-item\">\n            <Form.Item\n                // name=\"industry\"\n              >\n              <TreeSelect\n                allowClear\n                style={{ width: '100%' }}\n                // value={form.getFieldValue().region}\n                dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                treeData={industriesList}\n                placeholder=\"行业\"\n                // treeDefaultExpandAll\n                onChange={onIndustriesChange}\n              />\n              {/* <Cascader options={industriesList} onChange={onIndustriesChange} placeholder=\"行业\" /> */}\n            </Form.Item>\n          </div>\n        </Form>\n      </div>\n      {\n        isShowList && (\n          <div className={`erjilist-list ${type}-list`}>\n            {\n              (list && list.length > 0)\n                ? list.slice(0, type === 'jobsFair' ? 20 : 10).map((item, indexIndex) => {\n                  switch (type) {\n                    case 'preaches':\n                      return <ItemPreach key={item.title} riliType={item.riliType} data={item} />;\n                    case 'notices':\n                      return <ZhaopinItem key={item.title} riliType={item.riliType} data={item} />;\n                    case 'jobs':\n                      return <ZhiweiItem key={item.title} riliType={item.riliType} data={item} />;\n                    case 'jobsFair':\n                      return (\n                        <Fragment>\n                          <ItemJobWithFair key={item.title} riliType={item.riliType} data={item} />\n                        </Fragment>\n                      );\n                  }\n                  return <ZhaopinItem key={item.title} riliType={item.riliType} data={item} />\n                })\n                : <Empty />\n            }\n          </div>\n        )\n      }\n\n      {\n        list && list.length > 0 && isShowList && (\n          <Pagination pageSize={`${type === 'jobsFair' ? 20 : 10}`} defaultCurrent={1} onChange={onChange} total={total} showSizeChanger={false} />\n        )\n      }\n    </Fragment>\n  );\n}"]},"metadata":{},"sourceType":"module"}