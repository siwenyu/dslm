{"ast":null,"code":"import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment,useEffect}from'react';import{Table}from'antd';import{useHistory}from'react-router-dom';import Layout from'../../components/Layout';import ErjiDetailKeys from'../../components/ErjiDetailKeys';import ErjiBtn from'../../components/ErjiBtn';import SubmitResume from'../../components/SubmitResume';import{getSecPreachDetail}from'../../../api/second';import'./index.less';import RightTopNav from'../../components/RightTopNav';import{getParam}from'../../../utils/url';import{render}from'react-dom';var columns=[{title:'职位名称',dataIndex:'name',key:'name',render:function render(text,record){return/*#__PURE__*/React.createElement(\"a\",{href:\"/detailjob?id=\".concat(record.jobId,\"&rightNav=102&headerNav=13\")},text);}},{title:'单位名称',dataIndex:'unitName',key:'unitName'},{title:'需求人数',dataIndex:'number',key:'number',width:100},{title:'需求专业',dataIndex:'major',key:'major',width:300},{title:'投简历',dataIndex:'jobId',key:'jobId',width:140,render:function render(data,record){return/*#__PURE__*/React.createElement(SubmitResume,{data:record});}}];export default function DetailPreach(){var _detail$attachments,_detail$preachJobs;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listData=_useState4[0],setListData=_useState4[1];var history=useHistory();useEffect(function(){getData();},[history]);var getData=function getData(){getSecPreachDetail({preachId:getParam('id')}).then(function(res){if(res.data&&res.data.preach){var _data=res.data.preach;var _listData=[{key:'宣讲单位',value:_data.company&&_data.company.name||'暂无',link:'',linkText:''},{key:'宣讲时间',value:_data.preachDate?\"\".concat(_data.preachDate,\" \").concat(_data.start):'暂无'},// {\n//   key: '所在学校',\n//   value: _data.school || '暂无',\n// },\n{key:'宣讲地点',value:_data.place&&_data.place.name||'暂无'}// {\n//   key: '详情链接',\n//   value: '',\n// }\n];setListData(_listData);_data.preachJobs.forEach(function(e){e.unitName=_data.name;e.name=e.job.name;e.number=e.job.headCount||0;// 专业\nif(e.job.allMajors){e.major='专业不限';}else{var majorArr=[];e.job.majors.forEach(function(item){return majorArr.push(item.major||item.middleKind);});e.major=\"\".concat(majorArr.join('、'));}});setDetail(_data);}});};return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"erji preach-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"right\"},/*#__PURE__*/React.createElement(RightTopNav,null),/*#__PURE__*/React.createElement(\"div\",{className:\"normal-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"erji-title\"},detail.name),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m erji-gray-bg-text\"},/*#__PURE__*/React.createElement(\"span\",null,detail.publishTime,\"\\u53D1\\u5E03\")),listData&&listData.length>0&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title\"},\"\\u5BA3\\u8BB2\\u4FE1\\u606F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"erji-shuoming-detail normal-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"erji-list-wrap\"},/*#__PURE__*/React.createElement(ErjiDetailKeys,{list:listData})),/*#__PURE__*/React.createElement(SubmitResume,{text:\"\\u7ACB\\u5373\\u62A5\\u540D\",data:detail,modalTitle:\"\\u6B22\\u8FCE\\u626B\\u7801\\u62A5\\u540D\\u53C2\\u52A0\\u5BA3\\u8BB2\\u4F1A\"}))),detail.company&&detail.company.profile&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title\"},\"\\u5355\\u4F4D\\u4ECB\\u7ECD\"),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m pre-content\",dangerouslySetInnerHTML:{__html:\"\".concat(detail.company&&detail.company.profile||'')}})),detail.profile&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title\"},\"\\u62DB\\u8058\\u7B80\\u7AE0\"),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m pre-content\",dangerouslySetInnerHTML:{__html:\"\".concat(detail.profile||'')}})),/*#__PURE__*/React.createElement(\"br\",null),((_detail$attachments=detail.attachments)===null||_detail$attachments===void 0?void 0:_detail$attachments.length)>0&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title gap-bottom-s\"},\"\\u76F8\\u5173\\u9644\\u4EF6\"),/*#__PURE__*/React.createElement(\"div\",{className:\"erji-down\"},detail.attachments.map(function(e){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"a\",{key:e.url,href:e.url,className:\"erji-sub-title\"},e.name),/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(\"br\",null),detail.preachJobs&&detail.preachJobs.length>0&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-l erji-normal-title\"},\"\\u62DB\\u8058\\u804C\\u4F4D\",/*#__PURE__*/React.createElement(\"span\",null,((_detail$preachJobs=detail.preachJobs)===null||_detail$preachJobs===void 0?void 0:_detail$preachJobs.length)||0)),/*#__PURE__*/React.createElement(Table,{pagination:false,dataSource:detail.preachJobs,columns:columns}))))));}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/page/DetailPreach/index.js"],"names":["React","useState","Fragment","useEffect","Table","useHistory","Layout","ErjiDetailKeys","ErjiBtn","SubmitResume","getSecPreachDetail","RightTopNav","getParam","render","columns","title","dataIndex","key","text","record","jobId","width","data","DetailPreach","detail","setDetail","listData","setListData","history","getData","preachId","then","res","preach","_data","_listData","value","company","name","link","linkText","preachDate","start","place","preachJobs","forEach","e","unitName","job","number","headCount","allMajors","major","majorArr","majors","item","push","middleKind","join","publishTime","length","profile","__html","attachments","map","url"],"mappings":"kJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CAEA,OAASC,KAAT,KAAsB,MAAtB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CAEA,OAASC,kBAAT,KAAmC,qBAAnC,CAEA,MAAO,cAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CAEA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAASC,MAAT,KAAuB,WAAvB,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACd,CACEC,KAAK,CAAE,MADT,CAEEC,SAAS,CAAE,MAFb,CAGEC,GAAG,CAAE,MAHP,CAIAJ,MAAM,CAAE,gBAACK,IAAD,CAAOC,MAAP,qBAAkB,yBAAG,IAAI,yBAAmBA,MAAM,CAACC,KAA1B,8BAAP,EAAqEF,IAArE,CAAlB,EAJR,CADc,CAOd,CACEH,KAAK,CAAE,MADT,CAEEC,SAAS,CAAE,UAFb,CAGEC,GAAG,CAAE,UAHP,CAPc,CAYd,CACEF,KAAK,CAAE,MADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,GAAG,CAAE,QAHP,CAIEI,KAAK,CAAE,GAJT,CAZc,CAkBd,CACEN,KAAK,CAAE,MADT,CAEEC,SAAS,CAAE,OAFb,CAGEC,GAAG,CAAE,OAHP,CAIEI,KAAK,CAAE,GAJT,CAlBc,CAwBd,CACEN,KAAK,CAAE,KADT,CAEEC,SAAS,CAAE,OAFb,CAGEC,GAAG,CAAE,OAHP,CAIEI,KAAK,CAAE,GAJT,CAKER,MAAM,CAAE,gBAACS,IAAD,CAAOH,MAAP,qBAAkB,oBAAC,YAAD,EAAc,IAAI,CAAEA,MAApB,EAAlB,EALV,CAxBc,CAAhB,CAkCA,cAAe,SAASI,CAAAA,YAAT,EAAwB,0DACTtB,QAAQ,CAAC,EAAD,CADC,wCAC9BuB,MAD8B,eACtBC,SADsB,8BAELxB,QAAQ,CAAC,EAAD,CAFH,yCAE9ByB,QAF8B,eAEpBC,WAFoB,eAIrC,GAAMC,CAAAA,OAAO,CAAGvB,UAAU,EAA1B,CAEAF,SAAS,CAAC,UAAM,CACd0B,OAAO,GACR,CAFQ,CAEN,CAACD,OAAD,CAFM,CAAT,CAIA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBnB,kBAAkB,CAAC,CAAEoB,QAAQ,CAAElB,QAAQ,CAAC,IAAD,CAApB,CAAD,CAAlB,CAAiDmB,IAAjD,CAAsD,SAACC,GAAD,CAAS,CAC7D,GAAIA,GAAG,CAACV,IAAJ,EAAYU,GAAG,CAACV,IAAJ,CAASW,MAAzB,CAAiC,CAC/B,GAAMC,CAAAA,KAAK,CAAGF,GAAG,CAACV,IAAJ,CAASW,MAAvB,CACA,GAAME,CAAAA,SAAS,CAAG,CAChB,CACElB,GAAG,CAAE,MADP,CAEEmB,KAAK,CAAGF,KAAK,CAACG,OAAN,EAAiBH,KAAK,CAACG,OAAN,CAAcC,IAAhC,EAAyC,IAFlD,CAGEC,IAAI,CAAE,EAHR,CAIEC,QAAQ,CAAE,EAJZ,CADgB,CAOhB,CACEvB,GAAG,CAAE,MADP,CAEEmB,KAAK,CAAEF,KAAK,CAACO,UAAN,WAAsBP,KAAK,CAACO,UAA5B,aAA0CP,KAAK,CAACQ,KAAhD,EAA0D,IAFnE,CAPgB,CAWhB;AACA;AACA;AACA;AACA,CACEzB,GAAG,CAAE,MADP,CAEEmB,KAAK,CAAGF,KAAK,CAACS,KAAN,EAAeT,KAAK,CAACS,KAAN,CAAYL,IAA5B,EAAqC,IAF9C,CAIA;AACA;AACA;AACA;AAtBgB,CAAlB,CAwBAX,WAAW,CAACQ,SAAD,CAAX,CAEAD,KAAK,CAACU,UAAN,CAAiBC,OAAjB,CAAyB,SAAAC,CAAC,CAAI,CAC5BA,CAAC,CAACC,QAAF,CAAab,KAAK,CAACI,IAAnB,CACAQ,CAAC,CAACR,IAAF,CAASQ,CAAC,CAACE,GAAF,CAAMV,IAAf,CACAQ,CAAC,CAACG,MAAF,CAAWH,CAAC,CAACE,GAAF,CAAME,SAAN,EAAmB,CAA9B,CAEA;AAEA,GAAIJ,CAAC,CAACE,GAAF,CAAMG,SAAV,CAAqB,CACnBL,CAAC,CAACM,KAAF,CAAU,MAAV,CACD,CAFD,IAEO,CACL,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACAP,CAAC,CAACE,GAAF,CAAMM,MAAN,CAAaT,OAAb,CAAqB,SAAAU,IAAI,QAAIF,CAAAA,QAAQ,CAACG,IAAT,CAAcD,IAAI,CAACH,KAAL,EAAcG,IAAI,CAACE,UAAjC,CAAJ,EAAzB,EACAX,CAAC,CAACM,KAAF,WAAaC,QAAQ,CAACK,IAAT,CAAc,GAAd,CAAb,EACD,CAEF,CAfD,EAgBAjC,SAAS,CAACS,KAAD,CAAT,CACD,CACF,CA/CD,EAgDD,CAjDD,CAmDA,mBACE,oBAAC,MAAD,mBACE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,WAAD,MADF,cAEE,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BV,MAAM,CAACc,IAApC,CADF,cAEE,2BAAK,SAAS,CAAC,6BAAf,eACE,gCAAOd,MAAM,CAACmC,WAAd,gBADF,CAFF,CAQIjC,QAAQ,EAAIA,QAAQ,CAACkC,MAAT,CAAkB,CAA9B,eACE,oBAAC,QAAD,mBACE,2BAAK,SAAS,CAAC,6BAAf,6BADF,cAEE,2BAAK,SAAS,CAAC,iCAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,oBAAC,cAAD,EAAgB,IAAI,CAAElC,QAAtB,EADF,CADF,cAIE,oBAAC,YAAD,EAAc,IAAI,CAAC,0BAAnB,CAA0B,IAAI,CAAEF,MAAhC,CAAwC,UAAU,CAAC,oEAAnD,EAJF,CAFF,CATN,CAuBIA,MAAM,CAACa,OAAP,EAAkBb,MAAM,CAACa,OAAP,CAAewB,OAAjC,eACE,oBAAC,QAAD,mBACE,2BAAK,SAAS,CAAC,6BAAf,6BADF,cAEE,2BAAK,SAAS,CAAC,uBAAf,CAAuC,uBAAuB,CAAE,CAACC,MAAM,WAAKtC,MAAM,CAACa,OAAP,EAAkBb,MAAM,CAACa,OAAP,CAAewB,OAAjC,EAA4C,EAAjD,CAAP,CAAhE,EAFF,CAxBN,CAiCIrC,MAAM,CAACqC,OAAP,eACE,oBAAC,QAAD,mBACE,2BAAK,SAAS,CAAC,6BAAf,6BADF,cAEE,2BAAK,SAAS,CAAC,uBAAf,CAAuC,uBAAuB,CAAE,CAACC,MAAM,WAAKtC,MAAM,CAACqC,OAAP,EAAkB,EAAvB,CAAP,CAAhE,EAFF,CAlCN,cAwCE,8BAxCF,CA0CI,sBAAArC,MAAM,CAACuC,WAAP,kEAAoBH,MAApB,EAA6B,CAA7B,eACE,oBAAC,QAAD,mBACE,2BAAK,SAAS,CAAC,0CAAf,6BADF,cAGE,2BAAK,SAAS,CAAC,WAAf,EAEIpC,MAAM,CAACuC,WAAP,CAAmBC,GAAnB,CAAuB,SAAClB,CAAD,CAAO,CAC5B,mBACE,oBAAC,QAAD,mBACE,yBAAG,GAAG,CAAEA,CAAC,CAACmB,GAAV,CAAe,IAAI,CAAEnB,CAAC,CAACmB,GAAvB,CAA4B,SAAS,CAAC,gBAAtC,EAAwDnB,CAAC,CAACR,IAA1D,CADF,cACqE,8BADrE,CADF,CAKD,CAND,CAFJ,CAHF,CA3CN,cA6DE,8BA7DF,CAgEId,MAAM,CAACoB,UAAP,EAAqBpB,MAAM,CAACoB,UAAP,CAAkBgB,MAAlB,CAA2B,CAAhD,eACE,oBAAC,QAAD,mBACE,2BAAK,SAAS,CAAC,6BAAf,0CAEE,gCAAO,qBAAApC,MAAM,CAACoB,UAAP,gEAAmBgB,MAAnB,GAA6B,CAApC,CAFF,CADF,cAKE,oBAAC,KAAD,EAAO,UAAU,CAAE,KAAnB,CAA0B,UAAU,CAAEpC,MAAM,CAACoB,UAA7C,CAAyD,OAAO,CAAE9B,OAAlE,EALF,CAjEN,CAFF,CADF,CADF,CADF,CAoFD","sourcesContent":["import React, { useState, Fragment, useEffect } from 'react';\n\nimport { Table } from 'antd';\nimport { useHistory } from 'react-router-dom';\n\nimport Layout from '../../components/Layout';\nimport ErjiDetailKeys from '../../components/ErjiDetailKeys';\nimport ErjiBtn from '../../components/ErjiBtn';\nimport SubmitResume from '../../components/SubmitResume';\n\nimport { getSecPreachDetail } from '../../../api/second';\n\nimport './index.less';\nimport RightTopNav from '../../components/RightTopNav';\n\nimport { getParam } from '../../../utils/url';\nimport { render } from 'react-dom';\n\nconst columns = [\n  {\n    title: '职位名称',\n    dataIndex: 'name',\n    key: 'name',\n  render: (text, record) => <a href={`/detailjob?id=${record.jobId}&rightNav=102&headerNav=13`}>{text}</a>\n  },\n  {\n    title: '单位名称',\n    dataIndex: 'unitName',\n    key: 'unitName',\n  },\n  {\n    title: '需求人数',\n    dataIndex: 'number',\n    key: 'number',\n    width: 100,\n  },\n  {\n    title: '需求专业',\n    dataIndex: 'major',\n    key: 'major',\n    width: 300,\n  },\n  {\n    title: '投简历',\n    dataIndex: 'jobId',\n    key: 'jobId',\n    width: 140,\n    render: (data, record) => <SubmitResume data={record} />\n  },\n];\n\n\nexport default function DetailPreach() {\n  const [detail, setDetail] = useState({});\n  const [listData, setListData] = useState([]);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    getData();\n  }, [history]);\n\n  const getData = () => {\n    getSecPreachDetail({ preachId: getParam('id') }).then((res) => {\n      if (res.data && res.data.preach) {\n        const _data = res.data.preach;\n        const _listData = [\n          {\n            key: '宣讲单位',\n            value: (_data.company && _data.company.name) || '暂无',\n            link: '',\n            linkText: '',\n          },\n          {\n            key: '宣讲时间',\n            value: _data.preachDate ? `${_data.preachDate} ${_data.start}` : '暂无',\n          },\n          // {\n          //   key: '所在学校',\n          //   value: _data.school || '暂无',\n          // },\n          {\n            key: '宣讲地点',\n            value: (_data.place && _data.place.name) || '暂无',\n          },\n          // {\n          //   key: '详情链接',\n          //   value: '',\n          // }\n        ];\n        setListData(_listData);\n\n        _data.preachJobs.forEach(e => {\n          e.unitName = _data.name;\n          e.name = e.job.name;\n          e.number = e.job.headCount || 0;\n          \n          // 专业\n\n          if (e.job.allMajors) {\n            e.major = '专业不限';\n          } else {\n            let majorArr = [];\n            e.job.majors.forEach(item => majorArr.push(item.major || item.middleKind));\n            e.major = `${majorArr.join('、')}`;\n          }\n          \n        })\n        setDetail(_data);\n      }\n    });\n  }\n\n  return (\n    <Layout>\n      <div className=\"erji preach-detail\">\n        <div className=\"right\">\n          <RightTopNav />\n          <div className=\"normal-detail\">\n            <div className=\"erji-title\">{detail.name}</div>\n            <div className=\"gap-top-m erji-gray-bg-text\">\n              <span>{detail.publishTime}发布</span>\n            </div>\n\n            {/* 宣讲信息 */}\n            {\n              listData && listData.length > 0 && (\n                <Fragment>\n                  <div className=\"gap-top-l erji-normal-title\">宣讲信息</div>\n                  <div className=\"erji-shuoming-detail normal-row\">\n                    <div className=\"erji-list-wrap\">\n                      <ErjiDetailKeys list={listData} />\n                    </div>\n                    <SubmitResume text=\"立即报名\" data={detail} modalTitle=\"欢迎扫码报名参加宣讲会\" />\n                  </div>\n                </Fragment>\n              )\n            }\n\n            {/* 单位介绍 */}\n            {\n              detail.company && detail.company.profile && (\n                <Fragment>\n                  <div className=\"gap-top-l erji-normal-title\">单位介绍</div>\n                  <div className=\"gap-top-m pre-content\" dangerouslySetInnerHTML={{__html: `${detail.company && detail.company.profile || ''}`}}></div>\n                </Fragment>\n              )\n            }\n            \n            {/* 招聘简章 */}\n            {\n              detail.profile && (\n                <Fragment>\n                  <div className=\"gap-top-l erji-normal-title\">招聘简章</div>\n                  <div className=\"gap-top-m pre-content\" dangerouslySetInnerHTML={{__html: `${detail.profile || ''}`}}></div>\n                </Fragment>\n              )\n            }\n            <br />\n            {\n              detail.attachments?.length > 0 && (\n                <Fragment>\n                  <div className=\"gap-top-l erji-normal-title gap-bottom-s\">相关附件</div>\n\n                  <div className=\"erji-down\">\n                    {\n                      detail.attachments.map((e) => {\n                        return (\n                          <Fragment>\n                            <a key={e.url} href={e.url} className=\"erji-sub-title\">{e.name}</a><br />\n                          </Fragment>\n                        )\n                      })\n                    }\n                    \n                  </div>\n                </Fragment>\n              )\n            }\n            <br />\n            {/* 招聘职位 */}\n            {\n              detail.preachJobs && detail.preachJobs.length > 0 && (\n                <Fragment>\n                  <div className=\"gap-top-l erji-normal-title\">\n                    招聘职位\n                    <span>{detail.preachJobs?.length || 0}</span>\n                  </div>\n                  <Table pagination={false} dataSource={detail.preachJobs} columns={columns} />\n                </Fragment>\n              )\n            }\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}"]},"metadata":{},"sourceType":"module"}