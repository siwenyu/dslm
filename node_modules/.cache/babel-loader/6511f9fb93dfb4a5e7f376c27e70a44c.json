{"ast":null,"code":"import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Fragment}from'react';import{RViewer,RViewerTrigger}from'react-viewerjs';import{useHistory}from'react-router-dom';import Layout from'../../components/Layout';import'./index.less';import RightTopNav from'../../components/RightTopNav';import ErjiDetailKeys from'../../components/ErjiDetailKeys';import{getCompanyDetail}from'../../../api/second';import{getParam}from'../../../utils/url';var imgTexts=['官方宣传片','城市环境','教学环境'];export default function StuXuexiaoZhuye(){var _detail$logo;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listData=_useState4[0],setListData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),jobData=_useState6[0],setJobData=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),preachData=_useState8[0],setpreachData=_useState8[1];var history=useHistory();useEffect(function(){getData();},[history]);var getData=function getData(){getCompanyDetail({companyId:getParam('companyId')}).then(function(res){var _res$data,_res$data$jobs,_res$data2,_res$data2$preaches,_res$data3,_data$nature,_res$data4,_res$data4$company,_res$data5;console.log('getCompanyDetail');console.log(res.data.company);// 职位和宣讲会\nsetJobData(((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$jobs=_res$data.jobs)===null||_res$data$jobs===void 0?void 0:_res$data$jobs.length)||0);setpreachData(((_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$preaches=_res$data2.preaches)===null||_res$data2$preaches===void 0?void 0:_res$data2$preaches.length)||0);var _data=((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.company)||null;if(!_data)return;var _industry=_data.industry||null;var _listData=[{key:'官网地址',value:_data.website||'暂无',link:_data.website||'',linkText:''},{key:'领域',value:_industry?_industry.industryTiny||_industry.industrySmall||_industry.industryMiddle||_industry.industryBig:'暂无'},{key:'规模',value:_data.staffs||'暂无'},{key:'单位性质',value:((_data$nature=_data.nature)===null||_data$nature===void 0?void 0:_data$nature.name)||'暂无'},{key:'地址',value:\"\".concat(_data.address)}];setListData(_listData);var pics=(_res$data4=res.data)===null||_res$data4===void 0?void 0:(_res$data4$company=_res$data4.company)===null||_res$data4$company===void 0?void 0:_res$data4$company.pictures;var _pics=[];if(pics){pics.forEach(function(element){_pics.push(element.url);});res.data.company.pics=_pics;}setDetail(((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.company)||{});});};return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"erji\"},/*#__PURE__*/React.createElement(\"div\",{className:\"right\"},/*#__PURE__*/React.createElement(RightTopNav,null),/*#__PURE__*/React.createElement(\"div\",{className:\"xuexiaozhuye-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"erji-title\"},detail.name),/*#__PURE__*/React.createElement(\"div\",{className:\"company-info gap-top-m\"},/*#__PURE__*/React.createElement(\"div\",{className:\"company-logo gap-right-m\"},/*#__PURE__*/React.createElement(\"img\",{src:((_detail$logo=detail.logo)===null||_detail$logo===void 0?void 0:_detail$logo.url)||window.defaultLogo,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},/*#__PURE__*/React.createElement(ErjiDetailKeys,{list:listData}))),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m erji-normal-title\"},\"\\u5355\\u4F4D\\u7B80\\u4ECB\"),/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:\"\".concat(detail.profile||'')},className:\"gap-top-m pre-content\"}),detail.pictures&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m erji-normal-title gap-bottom-m\"},\"\\u89C6\\u9891/\\u56FE\\u7247\"),/*#__PURE__*/React.createElement(RViewer,{imageUrls:detail.pics},/*#__PURE__*/React.createElement(\"div\",{key:Math.random(),className:\"zhuye-img-list\"},detail.pictures.map(function(pic,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"zhuye-img-item\",key:pic},/*#__PURE__*/React.createElement(RViewerTrigger,{index:index},/*#__PURE__*/React.createElement(\"img\",{src:pic.url,alt:\"\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"gap-top-s\"},imgTexts[index]));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"gap-top-m erji-normal-title gap-bottom-m\"},\"\\u62DB\\u8058\\u52A8\\u6001\"),/*#__PURE__*/React.createElement(\"div\",{className:\"zhuye-info-list\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return history.push(\"/secjobs?secLNav=10&headerNav=11&companyName=\".concat(detail.name?detail.name:''));},className:\"zhuye-info-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title1\"},jobData),/*#__PURE__*/React.createElement(\"div\",{className:\"text\"},\"\\u5728\\u62DB\\u804C\\u4F4D\")),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return history.push(\"/xuanjianghui?secLNav=10&headerNav=11&companyName=\".concat(detail.name?detail.name:''));},className:\"zhuye-info-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title1\"},preachData),/*#__PURE__*/React.createElement(\"div\",{className:\"text\"},\"\\u5BA3\\u8BB2\\u4F1A\")),/*#__PURE__*/React.createElement(\"div\",{className:\"zhuye-info-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title2\"},\"\\u5EFA\\u8BBE\\u4E2D\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text\"},\"\\u8FDC\\u7A0B\\u9762\\u8BD5\")),/*#__PURE__*/React.createElement(\"div\",{className:\"zhuye-info-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title2\"},\"\\u5EFA\\u8BBE\\u4E2D\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text\"},\"\\u5386\\u53F2\\u7B7E\\u7EA6\")))))));}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/page/StuXuexiaoZhuye/index.js"],"names":["React","useState","useEffect","Fragment","RViewer","RViewerTrigger","useHistory","Layout","RightTopNav","ErjiDetailKeys","getCompanyDetail","getParam","imgTexts","StuXuexiaoZhuye","detail","setDetail","listData","setListData","jobData","setJobData","preachData","setpreachData","history","getData","companyId","then","res","console","log","data","company","jobs","length","preaches","_data","_industry","industry","_listData","key","value","website","link","linkText","industryTiny","industrySmall","industryMiddle","industryBig","staffs","nature","name","address","pics","pictures","_pics","forEach","element","push","url","logo","window","defaultLogo","__html","profile","Math","random","map","pic","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport { RViewer, RViewerTrigger } from 'react-viewerjs';\nimport { useHistory } from 'react-router-dom';\n\nimport Layout from '../../components/Layout';\n\nimport './index.less';\nimport RightTopNav from '../../components/RightTopNav';\n\nimport ErjiDetailKeys from '../../components/ErjiDetailKeys';\n\nimport { getCompanyDetail } from '../../../api/second';\nimport { getParam } from '../../../utils/url';\n\nconst imgTexts = [\n  '官方宣传片', '城市环境', '教学环境'\n];\n\nexport default function StuXuexiaoZhuye() {\n\n  const [detail, setDetail] = useState({});\n  const [listData, setListData] = useState([]);\n  const [jobData, setJobData] = useState(null);\n  const [preachData, setpreachData] = useState(null);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    getData();\n  }, [history]);\n\n  const getData = () => {\n    getCompanyDetail({ companyId: getParam('companyId') }).then((res) => {\n      console.log('getCompanyDetail');\n      console.log(res.data.company);\n      // 职位和宣讲会\n      setJobData(res.data?.jobs?.length || 0);\n      setpreachData(res.data?.preaches?.length || 0);\n      const _data = res.data?.company || null;\n      if (!_data) return;\n      const  _industry = _data.industry || null;\n\n      const _listData = [\n        {\n          key: '官网地址',\n          value: _data.website || '暂无',\n          link: _data.website || '',\n          linkText: '',\n        },\n        {\n          key: '领域',\n          value: _industry ? (_industry.industryTiny || _industry.industrySmall || _industry.industryMiddle || _industry.industryBig) : '暂无',\n        },\n        {\n          key: '规模',\n          value: _data.staffs || '暂无',\n        },\n        {\n          key: '单位性质',\n          value: _data.nature?.name || '暂无',\n        },\n        {\n          key: '地址',\n          value: `${_data.address}`,\n        }\n      ];\n      \n      setListData(_listData);\n\n      const pics = res.data?.company?.pictures;\n      const _pics = [];\n      if (pics) {\n        pics.forEach(element => {\n          _pics.push(element.url);\n        });\n\n        res.data.company.pics = _pics;\n      }\n      \n      setDetail(res.data?.company || {});\n    });\n  }\n\n  return (\n    <Layout>\n      <div className=\"erji\">\n        {/* <div>\n          <LeftNav list={navLeftListXuexiao} firstText=\"学校主页\" />\n          <div className=\"gap-top-m\">\n            <ErjiMap />\n          </div>\n        </div> */}\n\n        <div className=\"right\">\n          <RightTopNav />\n          <div className=\"xuexiaozhuye-detail\">\n            <div className=\"erji-title\">\n            {detail.name}\n            </div>\n            <div className=\"company-info gap-top-m\">\n              <div className=\"company-logo gap-right-m\">\n                <img src={detail.logo?.url || window.defaultLogo} alt=\"\" />\n              </div>\n              <div className=\"list\">\n                <ErjiDetailKeys list={listData} />\n              </div>\n            </div>\n\n            <div className=\"gap-top-m erji-normal-title\">单位简介</div>\n\n            <div dangerouslySetInnerHTML={{__html: `${detail.profile || ''}`}} className=\"gap-top-m pre-content\">\n            </div>\n\n            {\n              detail.pictures && (\n                <Fragment>\n                  <div className=\"gap-top-m erji-normal-title gap-bottom-m\">视频/图片</div>\n                  <RViewer imageUrls={detail.pics}>\n                    <div key={Math.random()} className=\"zhuye-img-list\">\n                      {detail.pictures.map((pic, index) => {\n                        return (\n                          <div className=\"zhuye-img-item\" key={pic}>\n                            <RViewerTrigger index={index}>\n                              <img src={pic.url} alt=\"\" />\n                            </RViewerTrigger>\n                            <span className=\"gap-top-s\">{imgTexts[index]}</span>\n                          </div>\n                        )\n                      })\n                      }\n                    </div>\n                  </RViewer>\n                </Fragment>\n              )\n            }\n\n            <div className=\"gap-top-m erji-normal-title gap-bottom-m\">招聘动态</div>\n\n            <div className=\"zhuye-info-list\">\n              <div onClick={() => history.push(`/secjobs?secLNav=10&headerNav=11&companyName=${detail.name ? detail.name : ''}`)} className=\"zhuye-info-item\">\n                <div className=\"title1\">{jobData}</div>\n                <div className=\"text\">在招职位</div>\n              </div>\n              <div onClick={() => history.push(`/xuanjianghui?secLNav=10&headerNav=11&companyName=${detail.name ? detail.name : ''}`)} className=\"zhuye-info-item\">\n                <div className=\"title1\">{preachData}</div>\n                <div className=\"text\">宣讲会</div>\n              </div>\n              <div className=\"zhuye-info-item\">\n                <div className=\"title2\">建设中</div>\n                <div className=\"text\">远程面试</div>\n              </div>\n              <div className=\"zhuye-info-item\">\n                <div className=\"title2\">建设中</div>\n                <div className=\"text\">历史签约</div>\n              </div>\n            </div>\n\n\n            {/* <div className=\"gap-top-l erji-normal-title\">相关附件</div>\n\n            <div className=\"erji-down\">\n              <a href=\"\" className=\"erji-sub-title\">吉林医药学院2020届毕业生“24365”线上招聘月邀请函.doc</a><br />\n              <a href=\"\">吉林医药学院2020届毕业生“24365”线上招聘月邀请函.doc</a>\n            </div>\n\n            <div className=\"gap-top-l erji-normal-title\">参会单位 <span>6</span></div> */}\n\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}"]},"metadata":{},"sourceType":"module"}