{"ast":null,"code":"import _slicedToArray from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"/Users/ss/Desktop/work/dslm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import React,{useState,Fragment,useEffect}from'react';import{Calendar,Badge}from'antd';import{RightOutlined}from'@ant-design/icons';import moment from'moment';import _ from'lodash';import'./index.less';import{getIndexRili}from'../../../api/index';export default function CalendarWrap(_ref){_objectDestructuringEmpty(_ref);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dataList=_useState2[0],setDataList=_useState2[1];useEffect(function(){gatData(moment().format('YYYY-MM'));},[]);var gatData=function gatData(month){getIndexRili({month:month}).then(function(res){res.data&&res.data.calendar&&setDataList(res.data.calendar);});};var getListData=function getListData(value){return dataList[value.format('YYYY-MM-DD')]||[];};var dateCellRender=function dateCellRender(value){var listDataOrigin=getListData(value);var listData=[];if(listDataOrigin.PREACH){listData=_.cloneWith(listDataOrigin.PREACH).splice(0,5);}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"time \".concat(listData&&listData.length>0?'selected':'',\" \").concat(moment().format('YYYY-MM-DD')===moment(value).format('YYYY-MM-DD')?'selected-bg':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"time-text\"},moment(value).format('DD')),/*#__PURE__*/React.createElement(\"ul\",{className:\"events\"},listData&&listData.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"item-bg\"},listDataOrigin.PREACH&&listDataOrigin.PREACH.length>0&&listDataOrigin.PREACH.length,/*#__PURE__*/React.createElement(\"div\",{className:\"item-content\"},listData.map(function(e){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return window.open(\"detailpreach?id=\".concat(e.preachId,\"&headerNav=11\"));},className:\"list-item c-line-clamp1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"before\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"time\"},e.start,\" ~ \",e.until),/*#__PURE__*/React.createElement(\"div\",{className:\"title16 c-line-clamp1\"},e.name)));}),listDataOrigin.PREACH&&listDataOrigin.PREACH.length>5&&/*#__PURE__*/React.createElement(\"div\",{className:\"more\",onClick:function onClick(){return window.open(\"/xuanjianghui?secLNav=10&headerNav=11&date=\".concat(value.format('YYYY-MM-DD')));}},\"\\u67E5\\u770B\\u5168\\u90E8\",listDataOrigin.PREACH.length,\"\\u6761 \\xA0\\xA0\",/*#__PURE__*/React.createElement(RightOutlined,null)))))));};var onChange=function onChange(data){gatData(moment(data).format('YYYY-MM'));};return/*#__PURE__*/React.createElement(Calendar,{locale:{lang:{locale:''}},onChange:onChange,dateFullCellRender:dateCellRender});}","map":{"version":3,"sources":["/Users/ss/Desktop/work/dslm/src/components/CalendarWrap/index.js"],"names":["React","useState","Fragment","useEffect","Calendar","Badge","RightOutlined","moment","_","getIndexRili","CalendarWrap","dataList","setDataList","gatData","format","month","then","res","data","calendar","getListData","value","dateCellRender","listDataOrigin","listData","PREACH","cloneWith","splice","length","map","e","window","open","preachId","start","until","name","onChange","lang","locale"],"mappings":"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","sourcesContent":["import React, { useState, Fragment, useEffect } from 'react';\nimport { Calendar, Badge } from 'antd';\nimport {RightOutlined} from '@ant-design/icons';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport './index.less';\n\nimport { getIndexRili } from '../../../api/index';\nexport default function CalendarWrap({\n  // text, isShowIcon, url\n}) {\n  const [dataList, setDataList] = useState([]);\n  useEffect(() => {\n    gatData(moment().format('YYYY-MM'));\n  }, []);\n\n  const gatData = (month) => {\n    getIndexRili({ month }).then(res => {\n      res.data && res.data.calendar && setDataList(res.data.calendar);\n    });\n  };\n\n  const getListData = (value) => {\n    return dataList[value.format('YYYY-MM-DD')] || [];\n  }\n  \n  const dateCellRender = (value) => {\n    const listDataOrigin = getListData(value);\n    let listData = [];\n    if (listDataOrigin.PREACH) {\n      listData = _.cloneWith(listDataOrigin.PREACH).splice(0, 5);\n    }\n    \n    return (\n      <Fragment>\n        <div\n          className={`time ${listData && listData.length > 0 ? 'selected' : ''} ${moment().format('YYYY-MM-DD') === moment(value).format('YYYY-MM-DD') ? 'selected-bg' : ''}`}\n        >\n          <div className=\"time-text\">{moment(value).format('DD') }</div>\n          <ul className=\"events\">\n            {\n              listData && listData.length > 0 && (\n                <div className=\"item-bg\">\n                  {listDataOrigin.PREACH && listDataOrigin.PREACH.length > 0 && listDataOrigin.PREACH.length}\n                  <div className=\"item-content\">\n                    {\n                      listData.map(e => {\n                        return (\n                          <Fragment>\n                            <div\n                              onClick={() => window.open(`detailpreach?id=${e.preachId}&headerNav=11`)}\n                              className=\"list-item c-line-clamp1\"\n                            >\n                              <div className=\"before\" />\n                              <div className=\"time\">{e.start} ~ {e.until}</div>\n                              <div className=\"title16 c-line-clamp1\">{e.name}</div>\n                            </div>\n                          </Fragment>\n                        )\n                      })\n                    }\n                    {\n                      listDataOrigin.PREACH && listDataOrigin.PREACH.length > 5 && (\n                        <div\n                          className=\"more\"\n                          onClick={() => window.open(`/xuanjianghui?secLNav=10&headerNav=11&date=${value.format('YYYY-MM-DD')}`)}\n                        >\n                          查看全部{listDataOrigin.PREACH.length}条 &nbsp;&nbsp;<RightOutlined />\n                        </div>\n                      )\n                    }\n                  </div>\n                </div>\n              )\n            }\n          </ul>\n        </div>\n        \n      </Fragment>\n    );\n  }\n\n  const onChange = (data) => {\n    gatData(moment(data).format('YYYY-MM'));\n  };\n\n  return (\n    <Calendar locale={{lang: { locale: '' }}} onChange={onChange} dateFullCellRender={dateCellRender} />\n  )\n}"]},"metadata":{},"sourceType":"module"}